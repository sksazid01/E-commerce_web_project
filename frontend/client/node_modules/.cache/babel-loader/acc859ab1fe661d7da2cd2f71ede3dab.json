{"ast":null,"code":"var _jsxFileName = \"/home/sk-sazid/Downloads/466-ECommerce-main (2)/frontend/client/src/views/OrderScreen/OrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useEffect } from 'react';\nimport { getUserOrders } from '../../actions/orderActions';\nimport { getAllOrders, verifyAOrder, updateAdminBalance } from '../../actions/adminAction';\nimport { checkUser } from '../Homescreen';\nimport { Modal } from 'react-bootstrap';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './OrderScreen.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function OrderScreen() {\n  _s();\n\n  const dispatch = useDispatch();\n  const adminState = useSelector(state => state.verifyAdminReducer);\n  const {\n    loadx,\n    sucx\n  } = useSelector(state => state.verifyAOrderReducer);\n  const {\n    currentAdmin\n  } = adminState;\n  const [UIDPass, setUIDPass] = useState(\"\");\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleClose_withConfirm = order => {\n    // if (UIDPass != currentAdmin[0].password) {\n    //   console.log(currentAdmin[0].password, \" vs You vs \", UIDPass);\n    //   toast.error(\"Admin's Credential Doesn't Match\",\n    //     { position: toast.POSITION.TOP_CENTER, autoClose: 3000 })\n    //   setUIDPass(\"\")\n    //   setShow(false);\n    //   return;\n    // }\n    // setUIDPass(\"\")\n    console.log('Accpeted' + order._id);\n    dispatch(verifyAOrder({\n      orderid: order._id\n    }));\n    dispatch(updateAdminBalance(currentAdmin[0].email, order.orderAmount));\n    toast.success(\"Order Forwared to Supplier \" + order._id, {\n      position: toast.POSITION.TOP_CENTER,\n      autoClose: 2000\n    });\n    setShow(false);\n  };\n\n  console.log(\"TEST \" + loadx + \" : \" + sucx);\n\n  const handleShow = () => setShow(true);\n\n  const orderstate = useSelector(state => state.getUserOrdersReducer);\n  const orderstateAdmin = useSelector(state => state.getAllOrdersReducer);\n  const logState = !!localStorage.getItem('currentAdmin');\n  var orders, error, loading;\n\n  if (logState) {\n    ({\n      orders,\n      error,\n      loading\n    } = orderstateAdmin);\n  } else {\n    ({\n      orders,\n      error,\n      loading\n    } = orderstate);\n  }\n\n  useEffect(() => {\n    if (!logState) {\n      dispatch(getUserOrders());\n      checkUser();\n    } else {\n      dispatch(getAllOrders());\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"orderScreenHolder\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {\n      limit: 2\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css\",\n      integrity: \"sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==\",\n      crossorigin: \"anonymous\",\n      referrerpolicy: \"no-referrer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-4\",\n        children: !logState ? \"My Orders\" : \"Check Orders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center\",\n        children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-border text-light\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger\",\n          role: \"alert\",\n          children: \"Something went wrong. Please try again later.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), orders && orders.map(order => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8 pp shadow-lg p-3 mb-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-left w-100 m-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"section-title\",\n                children: \"Items\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 19\n              }, this), order.orderItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"order-item\",\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: [item.name, \" [\", item.varient, \" \\xD7 \", item.quantity, \"] = \", item.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 23\n                }, this)\n              }, item._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"vertical\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-left w-100 m-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"section-title\",\n                children: \"Customer Info\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: [\"Name: \", order.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"address\",\n                children: [order.shippingAddress.street, \", \", order.shippingAddress.city, \",\", order.shippingAddress.pincode, \", \", order.shippingAddress.country]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-left w-100 m-1 pp2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"section-title\",\n                children: \"Order Info\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ch1\", {\n                children: [\"Order Amount: \", order.orderAmount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ch1\", {\n                children: [\"Date: \", new Date(order.createdAt).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ch1\", {\n                children: [\"Transaction ID: \", order.transactionId.slice(12)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ExtendedOrder\",\n              children: [logState && order.isDelivered === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn h1 clrme\",\n                  onClick: handleShow,\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-check-circle me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 25\n                  }, this), \"CONFIRM\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Modal, {\n                  show: show,\n                  className: \"modal modal_window\",\n                  children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n                    closeButton: true,\n                    onClick: handleClose,\n                    children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n                      className: \"pTname\",\n                      children: [\"Order No: \", order._id.slice(4)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 132,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n                    style: {\n                      maxHeight: 'calc(100vh - 210px)',\n                      overflowY: 'auto'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"order-details\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"pAmount\",\n                        children: [\"Amount Paid: \", order.orderAmount]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 142,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                        id: \"sphr\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 143,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"pMsg\",\n                        children: \"If you confirm this order, a supply request will be sent to the supplier with the transaction number.\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 144,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"pMsg2\",\n                        children: [\"Also \", /*#__PURE__*/_jsxDEV(\"span\", {\n                          id: \"amountSP\",\n                          children: order.orderAmount\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 149,\n                          columnNumber: 36\n                        }, this), \" BDT will be deducted from Admin's bank account.\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 148,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                        id: \"sphr\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 152,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 141,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-secondary\",\n                      onClick: handleClose,\n                      children: \"Close\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 157,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-primary\",\n                      onClick: () => handleClose_withConfirm(order),\n                      children: \"Proceed\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 21\n              }, this), !logState && order.isDelivered === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"fixarea\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-hourglass fa-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  id: \"fixt1\",\n                  children: \"Processing\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 21\n              }, this), order.isDelivered === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"fixarea\",\n                children: [logState ? /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-check fa-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-smile-o fa-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  id: \"fixit\",\n                  children: logState ? 'Supplied' : 'Products Received'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 21\n              }, this), order.isDelivered === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"fixarea\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-cubes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Under Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)\n        }, order._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderScreen, \"Ex8GxFrZWj0BTF8PVlAOiKzZ5IU=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = OrderScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderScreen\");","map":{"version":3,"sources":["/home/sk-sazid/Downloads/466-ECommerce-main (2)/frontend/client/src/views/OrderScreen/OrderScreen.js"],"names":["React","Component","useState","useDispatch","useSelector","useEffect","getUserOrders","getAllOrders","verifyAOrder","updateAdminBalance","checkUser","Modal","ToastContainer","toast","OrderScreen","dispatch","adminState","state","verifyAdminReducer","loadx","sucx","verifyAOrderReducer","currentAdmin","UIDPass","setUIDPass","show","setShow","handleClose","handleClose_withConfirm","order","console","log","_id","orderid","email","orderAmount","success","position","POSITION","TOP_CENTER","autoClose","handleShow","orderstate","getUserOrdersReducer","orderstateAdmin","getAllOrdersReducer","logState","localStorage","getItem","orders","error","loading","map","orderItems","item","name","varient","quantity","price","shippingAddress","street","city","pincode","country","Date","createdAt","toLocaleDateString","transactionId","slice","isDelivered","maxHeight","overflowY"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useEffect } from 'react'\nimport { getUserOrders } from '../../actions/orderActions'\nimport { getAllOrders, verifyAOrder, updateAdminBalance } from '../../actions/adminAction'\nimport { checkUser } from '../Homescreen';\nimport { Modal } from 'react-bootstrap'\n\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport './OrderScreen.css'\n\nexport default function OrderScreen() {\n\n  const dispatch = useDispatch()\n  const adminState = useSelector(state => state.verifyAdminReducer)\n  const{ loadx,sucx}= useSelector(state=>state.verifyAOrderReducer);\n  const { currentAdmin } = adminState\n\n  const [UIDPass, setUIDPass] = useState(\"\")\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n  const handleClose_withConfirm = (order) => {\n    // if (UIDPass != currentAdmin[0].password) {\n    //   console.log(currentAdmin[0].password, \" vs You vs \", UIDPass);\n    //   toast.error(\"Admin's Credential Doesn't Match\",\n    //     { position: toast.POSITION.TOP_CENTER, autoClose: 3000 })\n    //   setUIDPass(\"\")\n    //   setShow(false);\n    //   return;\n    // }\n    // setUIDPass(\"\")\n    console.log('Accpeted' + order._id);\n    dispatch(verifyAOrder({ orderid: order._id }))\n    dispatch(updateAdminBalance(currentAdmin[0].email, order.orderAmount))\n    toast.success(\"Order Forwared to Supplier \" + order._id,\n      { position: toast.POSITION.TOP_CENTER, autoClose: 2000 })\n    setShow(false);\n  }\n  \n  console.log(\"TEST \"+ loadx + \" : \"+ sucx);\n\n\n  const handleShow = () => setShow(true);\n\n  const orderstate = useSelector(state => state.getUserOrdersReducer)\n  const orderstateAdmin = useSelector(state => state.getAllOrdersReducer)\n  const logState = !(!localStorage.getItem('currentAdmin'));\n  var orders, error, loading;\n\n  if (logState) { ({ orders, error, loading } = orderstateAdmin) }\n  else { ({ orders, error, loading } = orderstate) }\n\n  useEffect(() => {\n\n    if (!logState) {\n      dispatch(getUserOrders())\n      checkUser()\n    }\n    else {\n      dispatch(getAllOrders())\n    }\n\n  }, [])\n\n  return (\n    <div className='orderScreenHolder'>\n      <ToastContainer limit={2} />\n      <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css\" integrity=\"sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\n\n      <div className=\"container\">\n        <h2 className=\"mb-4\">\n          {!logState ? \"My Orders\" : \"Check Orders\"}\n        </h2>\n        \n        <div className='row justify-content-center'>\n          {loading && \n            <div className=\"d-flex justify-content-center\">\n              <div className=\"spinner-border text-light\" role=\"status\">\n                <span className=\"sr-only\">Loading...</span>\n              </div>\n            </div>\n          }\n          {error && \n            <div className=\"alert alert-danger\" role=\"alert\">\n              Something went wrong. Please try again later.\n            </div>\n          }\n          {orders && orders.map(order => (\n            <div className='col-md-8 pp shadow-lg p-3 mb-3' key={order._id}>\n              <div className='flex-container'>\n                <div className=\"text-left w-100 m-1\">\n                  <h2 className=\"section-title\">Items</h2>\n                  {order.orderItems.map(item => (\n                    <div className=\"order-item\" key={item._id}>\n                      <h1>{item.name} [{item.varient} × {item.quantity}] = {item.price}</h1>\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"vertical\"></div>\n\n                <div className=\"text-left w-100 m-1\">\n                  <h2 className=\"section-title\">Customer Info</h2>\n                  <h1>Name: {order.name}</h1>\n                  <h1 className=\"address\">\n                    {order.shippingAddress.street}, {order.shippingAddress.city},\n                    {order.shippingAddress.pincode}, {order.shippingAddress.country}\n                  </h1>\n                </div>\n\n                <div className=\"text-left w-100 m-1 pp2\">\n                  <h2 className=\"section-title\">Order Info</h2>\n                  <ch1>Order Amount: {order.orderAmount}</ch1>\n                  <br />\n                  <ch1>Date: {new Date(order.createdAt).toLocaleDateString()}</ch1>\n                  <br />\n                  <ch1>Transaction ID: {order.transactionId.slice(12)}</ch1>\n                </div>\n\n                <div className=\"ExtendedOrder\">\n                  {logState && order.isDelivered === 0 && (\n                    <div>\n                      <button className=\"btn h1 clrme\" onClick={handleShow}>\n                        <i className=\"fas fa-check-circle me-2\"></i>\n                        CONFIRM\n                      </button>\n\n                      <Modal show={show} className='modal modal_window'>\n                        <Modal.Header closeButton onClick={handleClose}>\n                          <Modal.Title className=\"pTname\">\n                            Order No: {order._id.slice(4)}\n                          </Modal.Title>\n                        </Modal.Header>\n\n                        <Modal.Body style={{\n                          maxHeight: 'calc(100vh - 210px)',\n                          overflowY: 'auto'\n                        }}>\n                          <div className=\"order-details\">\n                            <p className=\"pAmount\">Amount Paid: {order.orderAmount}</p>\n                            <hr id='sphr' />\n                            <p className=\"pMsg\">\n                              If you confirm this order, a supply request will be sent to the supplier \n                              with the transaction number.\n                            </p>\n                            <p className=\"pMsg2\">\n                              Also <span id=\"amountSP\">{order.orderAmount}</span> BDT will be \n                              deducted from Admin's bank account.\n                            </p>\n                            <hr id='sphr' />\n                          </div>\n                        </Modal.Body>\n\n                        <Modal.Footer>\n                          <button className=\"btn btn-secondary\" onClick={handleClose}>\n                            Close\n                          </button>\n                          <button className=\"btn btn-primary\" onClick={() => handleClose_withConfirm(order)}>\n                            Proceed\n                          </button>\n                        </Modal.Footer>\n                      </Modal>\n                    </div>\n                  )}\n\n                  {!logState && order.isDelivered === 0 && (\n                    <div className='fixarea'>\n                      <i className=\"fas fa-hourglass fa-xl\"></i>\n                      <p id=\"fixt1\">Processing</p>\n                    </div>\n                  )}\n\n                  {order.isDelivered === 2 && (\n                    <div className='fixarea'>\n                      {logState ? (\n                        <i className=\"fa fa-check fa-xl\"></i>\n                      ) : (\n                        <i className=\"fa fa-smile-o fa-xl\"></i>\n                      )}\n                      <p id=\"fixit\">{logState ? 'Supplied' : 'Products Received'}</p>\n                    </div>\n                  )}\n\n                  {order.isDelivered === 1 && (\n                    <div className='fixarea'>\n                      <i className=\"fas fa-cubes\"></i>\n                      <p>Under Shipping</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}